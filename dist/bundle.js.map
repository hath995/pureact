{"version":3,"sources":["node_modules/browser-pack/_prelude.js","index.js","lib/ldom.js","lib/ljsx.js","lib/lstore.js","node_modules/vtree/diff.js","node_modules/vdom/patch.js","node_modules/vdom/create-element.js","node_modules/vtree/vtext.js","node_modules/vtree/vnode.js","node_modules/vtree/vpatch.js","node_modules/vtree/is-vnode.js","node_modules/vtree/is-widget.js","node_modules/vtree/is-vtext.js","node_modules/vtree/handle-thunk.js","node_modules/vtree/is-thunk.js","node_modules/vdom/dom-index.js","node_modules/vdom/patch-op.js","node_modules/vdom/apply-properties.js","node_modules/vtree/version.js","node_modules/vtree/is-vhook.js","node_modules/vdom/update-widget.js","node_modules/x-is-array/index.js","node_modules/global/document.js","node_modules/vdom/node_modules/is-object/index.js"],"names":["ldom","require","ljsx","lstore","module","exports","render","createStore","lastTree","rootNode","dom","vtree","tree","tagName","_vtreeVtext2","props","omit","children","map","child","_vtreeVnode2","node","before","Date","patches","_vtreeDiff2","console","log","Object","keys","length","_vdomPatch2","_vdomCreateElement2","appendChild","o","fields","assign","reduce","a","b","includes","_defineProperty","Array","_len","_key","arguments","reducer","initialState","state","listeners","store","getState","action","dispatch","forEach","listener","i","unsubscribe","subscribe","callback","push","diff","patch","walk","index","isThunk","thunks","hooks","apply","VPatch","REMOVE","destroyWidgets","isVNode","namespace","key","propsPatch","diffProps","properties","appendPatch","PROPS","diffChildren","VNODE","isVText","text","VTEXT","isWidget","WIDGET","aKey","undefined","aValue","bValue","isObject","getPrototype","objectDiff","bKey","value","getPrototypeOf","__proto__","constructor","prototype","aChildren","bChildren","reorder","aLen","bLen","len","leftNode","rightNode","INSERT","count","moves","ORDER","vNode","destroy","hasWidgets","hasThunks","nodes","handleThunk","thunkPatch","hasPatches","THUNK","descendantHooks","bKeys","keyIndex","aKeys","bMatch","aMatch","shuffle","freeIndex","moveIndex","removes","reverse","hasMoves","move","freeChild","isArray","patchRecursive","renderOptions","indices","patchIndices","domIndex","ownerDocument","document","nodeIndex","applyPatch","domNode","patchList","newNode","patchOp","Number","createElement","vnode","opts","doc","warn","init","createTextNode","createElementNS","applyProperties","childNode","VirtualText","this","String","version","type","VirtualNode","noProperties","noChildren","descendants","propName","hasOwnProperty","property","isVHook","VirtualPatch","NONE","isVirtualNode","x","w","isVirtualText","renderedA","renderedB","renderThunk","thunk","previous","renderedThunk","Error","t","sort","ascending","recurse","rootIndex","indexInRange","vChildren","childNodes","vChild","noChild","nextIndex","left","right","currentIndex","currentItem","minIndex","maxIndex","vpatch","removeNode","insertNode","stringPatch","widgetPatch","vNodePatch","reorderChildren","replaceRoot","parentNode","removeChild","destroyWidget","leftVNode","vText","nodeType","replaceData","replaceChild","widget","updateWidget","update","newWidget","bIndex","reverseIndex","insertOffset","insertBefore","oldRoot","newRoot","propValue","removeProperty","isHook","hook","patchObject","previousValue","attrName","removeAttribute","style","replacer","k","attrValue","setAttribute","id","obj","toString","call","nativeIsArray","topLevel","global","window","minDoc","doccy"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var ldom = require('./lib/ldom')\nvar ljsx = require('./lib/ljsx')\nvar lstore = require('./lib/lstore')\n\nmodule.exports = { render: ldom.render, ljsx, createStore: lstore }\n","import diff from 'vtree/diff'\nimport patch from 'vdom/patch'\nimport createElement from 'vdom/create-element'\nimport VText from 'vtree/vtext'\nimport VNode from 'vtree/vnode'\n\n// TODO: get rid of these\nvar lastTree, rootNode\n\nconst dom = {\n  vtree (tree) {\n    if (!tree.tagName) return new VText(tree)\n    var props = omit(tree, ['element', 'children', 'tagName'])\n    var children = tree.children && tree.children.map(child => dom.vtree(child))\n    return new VNode(tree.tagName, props, children)\n  },\n  render (tree, node) {\n    var before = new Date()\n    var vtree = dom.vtree(tree)\n    if (lastTree) {\n      var patches = diff(lastTree, vtree)\n      console.log(`applied ${Object.keys(patches).length} patches`)\n      node = patch(rootNode, patches)\n      lastTree = vtree\n    } else {\n      rootNode = createElement(vtree)\n      node.appendChild(rootNode)\n      lastTree = vtree\n    }\n    console.log(`render in ${new Date() - before}ms`)\n  }\n}\n\nvar omit = (o, fields) => Object.assign({}, Object.keys(o).reduce((a, b) => !fields.includes(b) && Object.assign(a, {[b]: o[b]}) || a, {}))\n\nexport default dom\n","export default function ljsx (tagName, props, ...children) {\n  if (typeof tagName === 'function') return tagName(props)\n  return Object.assign({tagName}, props, { children })\n}\n","export function createStore (reducer, initialState) {\n  var state = initialState || {}\n  var listeners = []\n  const store = {\n    getState: (action) => Object.assign({}, state, reducer(state, action || {})),\n    dispatch: (action) => {\n      state = store.getState(action)\n      listeners.forEach((listener, i) => listener(unsubscribe => { delete listeners[i] }))\n    },\n    subscribe: (callback) => listeners.push(callback)\n  }\n  return store\n}\n","var isArray = require(\"x-is-array\")\nvar isObject = require(\"is-object\")\n\nvar VPatch = require(\"./vpatch\")\nvar isVNode = require(\"./is-vnode\")\nvar isVText = require(\"./is-vtext\")\nvar isWidget = require(\"./is-widget\")\nvar isThunk = require(\"./is-thunk\")\nvar handleThunk = require(\"./handle-thunk\")\n\nmodule.exports = diff\n\nfunction diff(a, b) {\n    var patch = { a: a }\n    walk(a, b, patch, 0)\n    return patch\n}\n\nfunction walk(a, b, patch, index) {\n    if (a === b) {\n        if (isThunk(a) || isThunk(b)) {\n            thunks(a, b, patch, index)\n        } else {\n            hooks(b, patch, index)\n        }\n        return\n    }\n\n    var apply = patch[index]\n\n    if (isThunk(a) || isThunk(b)) {\n        thunks(a, b, patch, index)\n    } else if (b == null) {\n        patch[index] = new VPatch(VPatch.REMOVE, a, b)\n        destroyWidgets(a, patch, index)\n    } else if (isVNode(b)) {\n        if (isVNode(a)) {\n            if (a.tagName === b.tagName &&\n                a.namespace === b.namespace &&\n                a.key === b.key) {\n                var propsPatch = diffProps(a.properties, b.properties, b.hooks)\n                if (propsPatch) {\n                    apply = appendPatch(apply,\n                        new VPatch(VPatch.PROPS, a, propsPatch))\n                }\n                apply = diffChildren(a, b, patch, apply, index)\n            } else {\n                apply = appendPatch(apply, new VPatch(VPatch.VNODE, a, b))\n                destroyWidgets(a, patch, index)\n            }\n        } else {\n            apply = appendPatch(apply, new VPatch(VPatch.VNODE, a, b))\n            destroyWidgets(a, patch, index)\n        }\n    } else if (isVText(b)) {\n        if (!isVText(a)) {\n            apply = appendPatch(apply, new VPatch(VPatch.VTEXT, a, b))\n            destroyWidgets(a, patch, index)\n        } else if (a.text !== b.text) {\n            apply = appendPatch(apply, new VPatch(VPatch.VTEXT, a, b))\n        }\n    } else if (isWidget(b)) {\n        apply = appendPatch(apply, new VPatch(VPatch.WIDGET, a, b))\n\n        if (!isWidget(a)) {\n            destroyWidgets(a, patch, index)\n        }\n    }\n\n    if (apply) {\n        patch[index] = apply\n    }\n}\n\nfunction diffProps(a, b, hooks) {\n    var diff\n\n    for (var aKey in a) {\n        if (!(aKey in b)) {\n            diff = diff || {}\n            diff[aKey] = undefined\n        }\n\n        var aValue = a[aKey]\n        var bValue = b[aKey]\n\n        if (hooks && aKey in hooks) {\n            diff = diff || {}\n            diff[aKey] = bValue\n        } else {\n            if (isObject(aValue) && isObject(bValue)) {\n                if (getPrototype(bValue) !== getPrototype(aValue)) {\n                    diff = diff || {}\n                    diff[aKey] = bValue\n                } else {\n                    var objectDiff = diffProps(aValue, bValue)\n                    if (objectDiff) {\n                        diff = diff || {}\n                        diff[aKey] = objectDiff\n                    }\n                }\n            } else if (aValue !== bValue) {\n                diff = diff || {}\n                diff[aKey] = bValue\n            }\n        }\n    }\n\n    for (var bKey in b) {\n        if (!(bKey in a)) {\n            diff = diff || {}\n            diff[bKey] = b[bKey]\n        }\n    }\n\n    return diff\n}\n\nfunction getPrototype(value) {\n    if (Object.getPrototypeOf) {\n        return Object.getPrototypeOf(value)\n    } else if (value.__proto__) {\n        return value.__proto__\n    } else if (value.constructor) {\n        return value.constructor.prototype\n    }\n}\n\nfunction diffChildren(a, b, patch, apply, index) {\n    var aChildren = a.children\n    var bChildren = reorder(aChildren, b.children)\n\n    var aLen = aChildren.length\n    var bLen = bChildren.length\n    var len = aLen > bLen ? aLen : bLen\n\n    for (var i = 0; i < len; i++) {\n        var leftNode = aChildren[i]\n        var rightNode = bChildren[i]\n        index += 1\n\n        if (!leftNode) {\n            if (rightNode) {\n                // Excess nodes in b need to be added\n                apply = appendPatch(apply,\n                    new VPatch(VPatch.INSERT, null, rightNode))\n            }\n        } else {\n            walk(leftNode, rightNode, patch, index)\n        }\n\n        if (isVNode(leftNode) && leftNode.count) {\n            index += leftNode.count\n        }\n    }\n\n    if (bChildren.moves) {\n        // Reorder nodes last\n        apply = appendPatch(apply, new VPatch(VPatch.ORDER, a, bChildren.moves))\n    }\n\n    return apply\n}\n\n// Patch records for all destroyed widgets must be added because we need\n// a DOM node reference for the destroy function\nfunction destroyWidgets(vNode, patch, index) {\n    if (isWidget(vNode)) {\n        if (typeof vNode.destroy === \"function\") {\n            patch[index] = new VPatch(VPatch.REMOVE, vNode, null)\n        }\n    } else if (isVNode(vNode) && (vNode.hasWidgets || vNode.hasThunks)) {\n        var children = vNode.children\n        var len = children.length\n        for (var i = 0; i < len; i++) {\n            var child = children[i]\n            index += 1\n\n            destroyWidgets(child, patch, index)\n\n            if (isVNode(child) && child.count) {\n                index += child.count\n            }\n        }\n    } else if (isThunk(vNode)) {\n        thunks(vNode, null, patch, index)\n    }\n}\n\n// Create a sub-patch for thunks\nfunction thunks(a, b, patch, index) {\n    var nodes = handleThunk(a, b);\n    var thunkPatch = diff(nodes.a, nodes.b)\n    if (hasPatches(thunkPatch)) {\n        patch[index] = new VPatch(VPatch.THUNK, null, thunkPatch)\n    }\n}\n\nfunction hasPatches(patch) {\n    for (var index in patch) {\n        if (index !== \"a\") {\n            return true;\n        }\n    }\n\n    return false;\n}\n\n// Execute hooks when two nodes are identical\nfunction hooks(vNode, patch, index) {\n    if (isVNode(vNode)) {\n        if (vNode.hooks) {\n            patch[index] = new VPatch(VPatch.PROPS, vNode.hooks, vNode.hooks)\n        }\n\n        if (vNode.descendantHooks) {\n            var children = vNode.children\n            var len = children.length\n            for (var i = 0; i < len; i++) {\n                var child = children[i]\n                index += 1\n\n                hooks(child, patch, index)\n\n                if (isVNode(child) && child.count) {\n                    index += child.count\n                }\n            }\n        }\n    }\n}\n\n// List diff, naive left to right reordering\nfunction reorder(aChildren, bChildren) {\n\n    var bKeys = keyIndex(bChildren)\n\n    if (!bKeys) {\n        return bChildren\n    }\n\n    var aKeys = keyIndex(aChildren)\n\n    if (!aKeys) {\n        return bChildren\n    }\n\n    var bMatch = {}, aMatch = {}\n\n    for (var key in bKeys) {\n        bMatch[bKeys[key]] = aKeys[key]\n    }\n\n    for (var key in aKeys) {\n        aMatch[aKeys[key]] = bKeys[key]\n    }\n\n    var aLen = aChildren.length\n    var bLen = bChildren.length\n    var len = aLen > bLen ? aLen : bLen\n    var shuffle = []\n    var freeIndex = 0\n    var i = 0\n    var moveIndex = 0\n    var moves = {}\n    var removes = moves.removes = {}\n    var reverse = moves.reverse = {}\n    var hasMoves = false\n\n    while (freeIndex < len) {\n        var move = aMatch[i]\n        if (move !== undefined) {\n            shuffle[i] = bChildren[move]\n            if (move !== moveIndex) {\n                moves[move] = moveIndex\n                reverse[moveIndex] = move\n                hasMoves = true\n            }\n            moveIndex++\n        } else if (i in aMatch) {\n            shuffle[i] = undefined\n            removes[i] = moveIndex++\n            hasMoves = true\n        } else {\n            while (bMatch[freeIndex] !== undefined) {\n                freeIndex++\n            }\n\n            if (freeIndex < len) {\n                var freeChild = bChildren[freeIndex]\n                if (freeChild) {\n                    shuffle[i] = freeChild\n                    if (freeIndex !== moveIndex) {\n                        hasMoves = true\n                        moves[freeIndex] = moveIndex\n                        reverse[moveIndex] = freeIndex\n                    }\n                    moveIndex++\n                }\n                freeIndex++\n            }\n        }\n        i++\n    }\n\n    if (hasMoves) {\n        shuffle.moves = moves\n    }\n\n    return shuffle\n}\n\nfunction keyIndex(children) {\n    var i, keys\n\n    for (i = 0; i < children.length; i++) {\n        var child = children[i]\n\n        if (child.key !== undefined) {\n            keys = keys || {}\n            keys[child.key] = i\n        }\n    }\n\n    return keys\n}\n\nfunction appendPatch(apply, patch) {\n    if (apply) {\n        if (isArray(apply)) {\n            apply.push(patch)\n        } else {\n            apply = [apply, patch]\n        }\n\n        return apply\n    } else {\n        return patch\n    }\n}\n","var document = require(\"global/document\")\nvar isArray = require(\"x-is-array\")\n\nvar domIndex = require(\"./dom-index\")\nvar patchOp = require(\"./patch-op\")\nmodule.exports = patch\n\nfunction patch(rootNode, patches) {\n    return patchRecursive(rootNode, patches)\n}\n\nfunction patchRecursive(rootNode, patches, renderOptions) {\n    var indices = patchIndices(patches)\n\n    if (indices.length === 0) {\n        return rootNode\n    }\n\n    var index = domIndex(rootNode, patches.a, indices)\n    var ownerDocument = rootNode.ownerDocument\n\n    if (!renderOptions) {\n        renderOptions = { patch: patchRecursive }\n        if (ownerDocument !== document) {\n            renderOptions.document = ownerDocument\n        }\n    }\n\n    for (var i = 0; i < indices.length; i++) {\n        var nodeIndex = indices[i]\n        rootNode = applyPatch(rootNode,\n            index[nodeIndex],\n            patches[nodeIndex],\n            renderOptions)\n    }\n\n    return rootNode\n}\n\nfunction applyPatch(rootNode, domNode, patchList, renderOptions) {\n    if (!domNode) {\n        return rootNode\n    }\n\n    var newNode\n\n    if (isArray(patchList)) {\n        for (var i = 0; i < patchList.length; i++) {\n            newNode = patchOp(patchList[i], domNode, renderOptions)\n\n            if (domNode === rootNode) {\n                rootNode = newNode\n            }\n        }\n    } else {\n        newNode = patchOp(patchList, domNode, renderOptions)\n\n        if (domNode === rootNode) {\n            rootNode = newNode\n        }\n    }\n\n    return rootNode\n}\n\nfunction patchIndices(patches) {\n    var indices = []\n\n    for (var key in patches) {\n        if (key !== \"a\") {\n            indices.push(Number(key))\n        }\n    }\n\n    return indices\n}\n","var document = require(\"global/document\")\n\nvar applyProperties = require(\"./apply-properties\")\n\nvar isVNode = require(\"vtree/is-vnode\")\nvar isVText = require(\"vtree/is-vtext\")\nvar isWidget = require(\"vtree/is-widget\")\nvar handleThunk = require(\"vtree/handle-thunk\")\n\nmodule.exports = createElement\n\nfunction createElement(vnode, opts) {\n    var doc = opts ? opts.document || document : document\n    var warn = opts ? opts.warn : null\n\n    vnode = handleThunk(vnode).a\n\n    if (isWidget(vnode)) {\n        return vnode.init()\n    } else if (isVText(vnode)) {\n        return doc.createTextNode(vnode.text)\n    } else if (!isVNode(vnode)) {\n        if (warn) {\n            warn(\"Item is not a valid virtual dom node\", vnode)\n        }\n        return null\n    }\n\n    var node = (vnode.namespace === null) ?\n        doc.createElement(vnode.tagName) :\n        doc.createElementNS(vnode.namespace, vnode.tagName)\n\n    var props = vnode.properties\n    applyProperties(node, props)\n\n    var children = vnode.children\n\n    for (var i = 0; i < children.length; i++) {\n        var childNode = createElement(children[i], opts)\n        if (childNode) {\n            node.appendChild(childNode)\n        }\n    }\n\n    return node\n}\n","var version = require(\"./version\")\n\nmodule.exports = VirtualText\n\nfunction VirtualText(text) {\n    this.text = String(text)\n}\n\nVirtualText.prototype.version = version\nVirtualText.prototype.type = \"VirtualText\"\n","var version = require(\"./version\")\nvar isVNode = require(\"./is-vnode\")\nvar isWidget = require(\"./is-widget\")\nvar isThunk = require(\"./is-thunk\")\nvar isVHook = require(\"./is-vhook\")\n\nmodule.exports = VirtualNode\n\nvar noProperties = {}\nvar noChildren = []\n\nfunction VirtualNode(tagName, properties, children, key, namespace) {\n    this.tagName = tagName\n    this.properties = properties || noProperties\n    this.children = children || noChildren\n    this.key = key != null ? String(key) : undefined\n    this.namespace = (typeof namespace === \"string\") ? namespace : null\n\n    var count = (children && children.length) || 0\n    var descendants = 0\n    var hasWidgets = false\n    var hasThunks = false\n    var descendantHooks = false\n    var hooks\n\n    for (var propName in properties) {\n        if (properties.hasOwnProperty(propName)) {\n            var property = properties[propName]\n            if (isVHook(property)) {\n                if (!hooks) {\n                    hooks = {}\n                }\n\n                hooks[propName] = property\n            }\n        }\n    }\n\n    for (var i = 0; i < count; i++) {\n        var child = children[i]\n        if (isVNode(child)) {\n            descendants += child.count || 0\n\n            if (!hasWidgets && child.hasWidgets) {\n                hasWidgets = true\n            }\n\n            if (!hasThunks && child.hasThunks) {\n                hasThunks = true\n            }\n\n            if (!descendantHooks && (child.hooks || child.descendantHooks)) {\n                descendantHooks = true\n            }\n        } else if (!hasWidgets && isWidget(child)) {\n            if (typeof child.destroy === \"function\") {\n                hasWidgets = true\n            }\n        } else if (!hasThunks && isThunk(child)) {\n            hasThunks = true;\n        }\n    }\n\n    this.count = count + descendants\n    this.hasWidgets = hasWidgets\n    this.hasThunks = hasThunks\n    this.hooks = hooks\n    this.descendantHooks = descendantHooks\n}\n\nVirtualNode.prototype.version = version\nVirtualNode.prototype.type = \"VirtualNode\"\n","var version = require(\"./version\")\n\nVirtualPatch.NONE = 0\nVirtualPatch.VTEXT = 1\nVirtualPatch.VNODE = 2\nVirtualPatch.WIDGET = 3\nVirtualPatch.PROPS = 4\nVirtualPatch.ORDER = 5\nVirtualPatch.INSERT = 6\nVirtualPatch.REMOVE = 7\nVirtualPatch.THUNK = 8\n\nmodule.exports = VirtualPatch\n\nfunction VirtualPatch(type, vNode, patch) {\n    this.type = Number(type)\n    this.vNode = vNode\n    this.patch = patch\n}\n\nVirtualPatch.prototype.version = version\nVirtualPatch.prototype.type = \"VirtualPatch\"\n","var version = require(\"./version\")\n\nmodule.exports = isVirtualNode\n\nfunction isVirtualNode(x) {\n    return x && x.type === \"VirtualNode\" && x.version === version\n}\n","module.exports = isWidget\n\nfunction isWidget(w) {\n    return w && w.type === \"Widget\"\n}\n","var version = require(\"./version\")\n\nmodule.exports = isVirtualText\n\nfunction isVirtualText(x) {\n    return x && x.type === \"VirtualText\" && x.version === version\n}\n","var isVNode = require(\"./is-vnode\")\nvar isVText = require(\"./is-vtext\")\nvar isWidget = require(\"./is-widget\")\nvar isThunk = require(\"./is-thunk\")\n\nmodule.exports = handleThunk\n\nfunction handleThunk(a, b) {\n    var renderedA = a\n    var renderedB = b\n\n    if (isThunk(b)) {\n        renderedB = renderThunk(b, a)\n    }\n\n    if (isThunk(a)) {\n        renderedA = renderThunk(a, null)\n    }\n\n    return {\n        a: renderedA,\n        b: renderedB\n    }\n}\n\nfunction renderThunk(thunk, previous) {\n    var renderedThunk = thunk.vnode\n\n    if (!renderedThunk) {\n        renderedThunk = thunk.vnode = thunk.render(previous)\n    }\n\n    if (!(isVNode(renderedThunk) ||\n            isVText(renderedThunk) ||\n            isWidget(renderedThunk))) {\n        throw new Error(\"thunk did not return a valid node\");\n    }\n\n    return renderedThunk\n}\n","module.exports = isThunk\r\n\r\nfunction isThunk(t) {\r\n    return t && t.type === \"Thunk\"\r\n}\r\n","// Maps a virtual DOM tree onto a real DOM tree in an efficient manner.\n// We don't want to read all of the DOM nodes in the tree so we use\n// the in-order tree indexing to eliminate recursion down certain branches.\n// We only recurse into a DOM node if we know that it contains a child of\n// interest.\n\nvar noChild = {}\n\nmodule.exports = domIndex\n\nfunction domIndex(rootNode, tree, indices, nodes) {\n    if (!indices || indices.length === 0) {\n        return {}\n    } else {\n        indices.sort(ascending)\n        return recurse(rootNode, tree, indices, nodes, 0)\n    }\n}\n\nfunction recurse(rootNode, tree, indices, nodes, rootIndex) {\n    nodes = nodes || {}\n\n\n    if (rootNode) {\n        if (indexInRange(indices, rootIndex, rootIndex)) {\n            nodes[rootIndex] = rootNode\n        }\n\n        var vChildren = tree.children\n\n        if (vChildren) {\n\n            var childNodes = rootNode.childNodes\n\n            for (var i = 0; i < tree.children.length; i++) {\n                rootIndex += 1\n\n                var vChild = vChildren[i] || noChild\n                var nextIndex = rootIndex + (vChild.count || 0)\n\n                // skip recursion down the tree if there are no nodes down here\n                if (indexInRange(indices, rootIndex, nextIndex)) {\n                    recurse(childNodes[i], vChild, indices, nodes, rootIndex)\n                }\n\n                rootIndex = nextIndex\n            }\n        }\n    }\n\n    return nodes\n}\n\n// Binary search for an index in the interval [left, right]\nfunction indexInRange(indices, left, right) {\n    if (indices.length === 0) {\n        return false\n    }\n\n    var minIndex = 0\n    var maxIndex = indices.length - 1\n    var currentIndex\n    var currentItem\n\n    while (minIndex <= maxIndex) {\n        currentIndex = ((maxIndex + minIndex) / 2) >> 0\n        currentItem = indices[currentIndex]\n\n        if (minIndex === maxIndex) {\n            return currentItem >= left && currentItem <= right\n        } else if (currentItem < left) {\n            minIndex = currentIndex + 1\n        } else  if (currentItem > right) {\n            maxIndex = currentIndex - 1\n        } else {\n            return true\n        }\n    }\n\n    return false;\n}\n\nfunction ascending(a, b) {\n    return a > b ? 1 : -1\n}\n","var applyProperties = require(\"./apply-properties\")\n\nvar isWidget = require(\"vtree/is-widget\")\nvar VPatch = require(\"vtree/vpatch\")\n\nvar render = require(\"./create-element\")\nvar updateWidget = require(\"./update-widget\")\n\nmodule.exports = applyPatch\n\nfunction applyPatch(vpatch, domNode, renderOptions) {\n    var type = vpatch.type\n    var vNode = vpatch.vNode\n    var patch = vpatch.patch\n\n    switch (type) {\n        case VPatch.REMOVE:\n            return removeNode(domNode, vNode)\n        case VPatch.INSERT:\n            return insertNode(domNode, patch, renderOptions)\n        case VPatch.VTEXT:\n            return stringPatch(domNode, vNode, patch, renderOptions)\n        case VPatch.WIDGET:\n            return widgetPatch(domNode, vNode, patch, renderOptions)\n        case VPatch.VNODE:\n            return vNodePatch(domNode, vNode, patch, renderOptions)\n        case VPatch.ORDER:\n            reorderChildren(domNode, patch)\n            return domNode\n        case VPatch.PROPS:\n            applyProperties(domNode, patch, vNode.properties)\n            return domNode\n        case VPatch.THUNK:\n            return replaceRoot(domNode,\n                renderOptions.patch(domNode, patch, renderOptions))\n        default:\n            return domNode\n    }\n}\n\nfunction removeNode(domNode, vNode) {\n    var parentNode = domNode.parentNode\n\n    if (parentNode) {\n        parentNode.removeChild(domNode)\n    }\n\n    destroyWidget(domNode, vNode);\n\n    return null\n}\n\nfunction insertNode(parentNode, vNode, renderOptions) {\n    var newNode = render(vNode, renderOptions)\n\n    if (parentNode) {\n        parentNode.appendChild(newNode)\n    }\n\n    return parentNode\n}\n\nfunction stringPatch(domNode, leftVNode, vText, renderOptions) {\n    var newNode\n\n    if (domNode.nodeType === 3) {\n        domNode.replaceData(0, domNode.length, vText.text)\n        newNode = domNode\n    } else {\n        var parentNode = domNode.parentNode\n        newNode = render(vText, renderOptions)\n\n        if (parentNode) {\n            parentNode.replaceChild(newNode, domNode)\n        }\n    }\n\n    destroyWidget(domNode, leftVNode)\n\n    return newNode\n}\n\nfunction widgetPatch(domNode, leftVNode, widget, renderOptions) {\n    if (updateWidget(leftVNode, widget)) {\n        return widget.update(leftVNode, domNode) || domNode\n    }\n\n    var parentNode = domNode.parentNode\n    var newWidget = render(widget, renderOptions)\n\n    if (parentNode) {\n        parentNode.replaceChild(newWidget, domNode)\n    }\n\n    destroyWidget(domNode, leftVNode)\n\n    return newWidget\n}\n\nfunction vNodePatch(domNode, leftVNode, vNode, renderOptions) {\n    var parentNode = domNode.parentNode\n    var newNode = render(vNode, renderOptions)\n\n    if (parentNode) {\n        parentNode.replaceChild(newNode, domNode)\n    }\n\n    destroyWidget(domNode, leftVNode)\n\n    return newNode\n}\n\nfunction destroyWidget(domNode, w) {\n    if (typeof w.destroy === \"function\" && isWidget(w)) {\n        w.destroy(domNode)\n    }\n}\n\nfunction reorderChildren(domNode, bIndex) {\n    var children = []\n    var childNodes = domNode.childNodes\n    var len = childNodes.length\n    var i\n    var reverseIndex = bIndex.reverse\n\n    for (i = 0; i < len; i++) {\n        children.push(domNode.childNodes[i])\n    }\n\n    var insertOffset = 0\n    var move\n    var node\n    var insertNode\n    for (i = 0; i < len; i++) {\n        move = bIndex[i]\n        if (move !== undefined && move !== i) {\n            // the element currently at this index will be moved later so increase the insert offset\n            if (reverseIndex[i] > i) {\n                insertOffset++\n            }\n\n            node = children[move]\n            insertNode = childNodes[i + insertOffset] || null\n            if (node !== insertNode) {\n                domNode.insertBefore(node, insertNode)\n            }\n\n            // the moved element came from the front of the array so reduce the insert offset\n            if (move < i) {\n                insertOffset--\n            }\n        }\n\n        // element at this index is scheduled to be removed so increase insert offset\n        if (i in bIndex.removes) {\n            insertOffset++\n        }\n    }\n}\n\nfunction replaceRoot(oldRoot, newRoot) {\n    if (oldRoot && newRoot && oldRoot !== newRoot && oldRoot.parentNode) {\n        console.log(oldRoot)\n        oldRoot.parentNode.replaceChild(newRoot, oldRoot)\n    }\n\n    return newRoot;\n}\n","var isObject = require(\"is-object\")\nvar isHook = require(\"vtree/is-vhook\")\n\nmodule.exports = applyProperties\n\nfunction applyProperties(node, props, previous) {\n    for (var propName in props) {\n        var propValue = props[propName]\n\n        if (propValue === undefined) {\n            removeProperty(node, props, previous, propName);\n        } else if (isHook(propValue)) {\n            propValue.hook(node,\n                propName,\n                previous ? previous[propName] : undefined)\n        } else {\n            if (isObject(propValue)) {\n                patchObject(node, props, previous, propName, propValue);\n            } else if (propValue !== undefined) {\n                node[propName] = propValue\n            }\n        }\n    }\n}\n\nfunction removeProperty(node, props, previous, propName) {\n    if (previous) {\n        var previousValue = previous[propName]\n\n        if (!isHook(previousValue)) {\n            if (propName === \"attributes\") {\n                for (var attrName in previousValue) {\n                    node.removeAttribute(attrName)\n                }\n            } else if (propName === \"style\") {\n                for (var i in previousValue) {\n                    node.style[i] = \"\"\n                }\n            } else if (typeof previousValue === \"string\") {\n                node[propName] = \"\"\n            } else {\n                node[propName] = null\n            }\n        }\n    }\n}\n\nfunction patchObject(node, props, previous, propName, propValue) {\n    var previousValue = previous ? previous[propName] : undefined\n\n    // Set attributes\n    if (propName === \"attributes\") {\n        for (var attrName in propValue) {\n            var attrValue = propValue[attrName]\n\n            if (attrValue === undefined) {\n                node.removeAttribute(attrName)\n            } else {\n                node.setAttribute(attrName, attrValue)\n            }\n        }\n\n        return\n    }\n\n    if(previousValue && isObject(previousValue) &&\n        getPrototype(previousValue) !== getPrototype(propValue)) {\n        node[propName] = propValue\n        return\n    }\n\n    if (!isObject(node[propName])) {\n        node[propName] = {}\n    }\n\n    var replacer = propName === \"style\" ? \"\" : undefined\n\n    for (var k in propValue) {\n        var value = propValue[k]\n        node[propName][k] = (value === undefined) ? replacer : value\n    }\n}\n\nfunction getPrototype(value) {\n    if (Object.getPrototypeOf) {\n        return Object.getPrototypeOf(value)\n    } else if (value.__proto__) {\n        return value.__proto__\n    } else if (value.constructor) {\n        return value.constructor.prototype\n    }\n}\n","module.exports = \"1\"\n","module.exports = isHook\n\nfunction isHook(hook) {\n    return hook && typeof hook.hook === \"function\" &&\n        !hook.hasOwnProperty(\"hook\")\n}\n","var isWidget = require(\"vtree/is-widget\")\n\nmodule.exports = updateWidget\n\nfunction updateWidget(a, b) {\n    if (isWidget(a) && isWidget(b)) {\n        if (\"name\" in a && \"name\" in b) {\n            return a.id === b.id\n        } else {\n            return a.init === b.init\n        }\n    }\n\n    return false\n}\n","var nativeIsArray = Array.isArray\nvar toString = Object.prototype.toString\n\nmodule.exports = nativeIsArray || isArray\n\nfunction isArray(obj) {\n    return toString.call(obj) === \"[object Array]\"\n}\n","var topLevel = typeof global !== 'undefined' ? global :\n    typeof window !== 'undefined' ? window : {}\nvar minDoc = require('min-document');\n\nif (typeof document !== 'undefined') {\n    module.exports = document;\n} else {\n    var doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n    if (!doccy) {\n        doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n    }\n\n    module.exports = doccy;\n}\n","module.exports = isObject\n\nfunction isObject(x) {\n    return typeof x === \"object\" && x !== null\n}\n"]}