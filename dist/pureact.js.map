{"version":3,"sources":["node_modules/browser-pack/_prelude.js","index.js","lib/ldom.js","lib/ljsx.js","lib/lstore.js","node_modules/vtree/diff.js","node_modules/vtree/vtext.js","node_modules/vdom/patch.js","node_modules/vdom/create-element.js","node_modules/vtree/vnode.js","node_modules/vtree/vpatch.js","node_modules/vtree/is-vtext.js","node_modules/vtree/is-vnode.js","node_modules/vtree/is-widget.js","node_modules/vtree/is-thunk.js","node_modules/vtree/handle-thunk.js","node_modules/vtree/version.js","node_modules/vdom/dom-index.js","node_modules/vdom/patch-op.js","node_modules/vdom/apply-properties.js","node_modules/vtree/is-vhook.js","node_modules/vdom/update-widget.js","node_modules/x-is-array/index.js","node_modules/global/document.js","node_modules/vdom/node_modules/is-object/index.js"],"names":["render","_libLdom2","ljsx","_libLjsx2","createStore","_libLstore2","lastTree","rootNode","dom","vtree","tree","tagName","_vtreeVtext2","props","omit","children","map","child","_vtreeVnode2","node","before","Date","patches","_vtreeDiff2","console","log","Object","keys","length","_vdomPatch2","_vdomCreateElement2","appendChild","o","fields","assign","reduce","a","b","includes","_defineProperty","Array","_len","_key","arguments","reducer","initialState","state","listeners","store","getState","action","dispatch","forEach","listener","i","unsubscribe","subscribe","callback","push","diff","patch","walk","index","isThunk","thunks","hooks","apply","VPatch","REMOVE","destroyWidgets","isVNode","namespace","key","propsPatch","diffProps","properties","appendPatch","PROPS","diffChildren","VNODE","isVText","text","VTEXT","isWidget","WIDGET","aKey","undefined","aValue","bValue","isObject","getPrototype","objectDiff","bKey","value","getPrototypeOf","__proto__","constructor","prototype","aChildren","bChildren","reorder","aLen","bLen","len","leftNode","rightNode","INSERT","count","moves","ORDER","vNode","destroy","hasWidgets","hasThunks","nodes","handleThunk","thunkPatch","hasPatches","THUNK","descendantHooks","bKeys","keyIndex","aKeys","bMatch","aMatch","shuffle","freeIndex","moveIndex","removes","reverse","hasMoves","move","freeChild","isArray","require","module","exports","VirtualText","this","String","version","type","patchRecursive","renderOptions","indices","patchIndices","domIndex","ownerDocument","document","nodeIndex","applyPatch","domNode","patchList","newNode","patchOp","Number","createElement","vnode","opts","doc","warn","init","createTextNode","createElementNS","applyProperties","childNode","VirtualNode","noProperties","noChildren","descendants","propName","hasOwnProperty","property","isVHook","VirtualPatch","NONE","isVirtualText","x","isVirtualNode","w","t","renderedA","renderedB","renderThunk","thunk","previous","renderedThunk","Error","sort","ascending","recurse","rootIndex","indexInRange","vChildren","childNodes","vChild","noChild","nextIndex","left","right","currentIndex","currentItem","minIndex","maxIndex","vpatch","removeNode","insertNode","stringPatch","widgetPatch","vNodePatch","reorderChildren","replaceRoot","parentNode","removeChild","destroyWidget","leftVNode","vText","nodeType","replaceData","replaceChild","widget","updateWidget","update","newWidget","bIndex","reverseIndex","insertOffset","insertBefore","oldRoot","newRoot","propValue","removeProperty","isHook","hook","patchObject","previousValue","attrName","removeAttribute","style","replacer","k","attrValue","setAttribute","id","obj","toString","call","nativeIsArray","topLevel","global","window","minDoc","doccy"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import ldom from './lib/ldom'\nimport ljsx from './lib/ljsx'\nimport lstore from './lib/lstore'\n\nexport default {render: ldom.render, ljsx, createStore: lstore}\n","import diff from 'vtree/diff'\nimport patch from 'vdom/patch'\nimport createElement from 'vdom/create-element'\nimport VText from 'vtree/vtext'\nimport VNode from 'vtree/vnode'\n\n// TODO: get rid of these\nvar lastTree, rootNode\n\nconst dom = {\n  vtree (tree) {\n    if (!tree.tagName) return new VText(tree)\n    var props = omit(tree, ['element', 'children', 'tagName'])\n    var children = tree.children && tree.children.map(child => dom.vtree(child))\n    return new VNode(tree.tagName, props, children)\n  },\n  render (tree, node) {\n    var before = new Date()\n    var vtree = dom.vtree(tree)\n    if (lastTree) {\n      var patches = diff(lastTree, vtree)\n      console.log(`applied ${Object.keys(patches).length} patches`)\n      node = patch(rootNode, patches)\n      lastTree = vtree\n    } else {\n      rootNode = createElement(vtree)\n      node.appendChild(rootNode)\n      lastTree = vtree\n    }\n    console.log(`render in ${new Date() - before}ms`)\n  }\n}\n\nvar omit = (o, fields) => Object.assign({}, Object.keys(o).reduce((a, b) => !fields.includes(b) && Object.assign(a, {[b]: o[b]}) || a, {}))\n\nexport default dom\n","export default function ljsx (tagName, props, ...children) {\n  if (typeof tagName === 'function') return tagName(props)\n  return Object.assign({tagName}, props, { children })\n}\n","export default function createStore (reducer, initialState) {\n  var state = initialState || {}\n  var listeners = []\n  const store = {\n    getState: (action) => Object.assign({}, state, reducer(state, action || {})),\n    dispatch: (action) => {\n      state = store.getState(action)\n      listeners.forEach((listener, i) => listener(unsubscribe => { delete listeners[i] }))\n    },\n    subscribe: (callback) => listeners.push(callback)\n  }\n  return store\n}\n","var isArray = require(\"x-is-array\")\nvar isObject = require(\"is-object\")\n\nvar VPatch = require(\"./vpatch\")\nvar isVNode = require(\"./is-vnode\")\nvar isVText = require(\"./is-vtext\")\nvar isWidget = require(\"./is-widget\")\nvar isThunk = require(\"./is-thunk\")\nvar handleThunk = require(\"./handle-thunk\")\n\nmodule.exports = diff\n\nfunction diff(a, b) {\n    var patch = { a: a }\n    walk(a, b, patch, 0)\n    return patch\n}\n\nfunction walk(a, b, patch, index) {\n    if (a === b) {\n        if (isThunk(a) || isThunk(b)) {\n            thunks(a, b, patch, index)\n        } else {\n            hooks(b, patch, index)\n        }\n        return\n    }\n\n    var apply = patch[index]\n\n    if (isThunk(a) || isThunk(b)) {\n        thunks(a, b, patch, index)\n    } else if (b == null) {\n        patch[index] = new VPatch(VPatch.REMOVE, a, b)\n        destroyWidgets(a, patch, index)\n    } else if (isVNode(b)) {\n        if (isVNode(a)) {\n            if (a.tagName === b.tagName &&\n                a.namespace === b.namespace &&\n                a.key === b.key) {\n                var propsPatch = diffProps(a.properties, b.properties, b.hooks)\n                if (propsPatch) {\n                    apply = appendPatch(apply,\n                        new VPatch(VPatch.PROPS, a, propsPatch))\n                }\n                apply = diffChildren(a, b, patch, apply, index)\n            } else {\n                apply = appendPatch(apply, new VPatch(VPatch.VNODE, a, b))\n                destroyWidgets(a, patch, index)\n            }\n        } else {\n            apply = appendPatch(apply, new VPatch(VPatch.VNODE, a, b))\n            destroyWidgets(a, patch, index)\n        }\n    } else if (isVText(b)) {\n        if (!isVText(a)) {\n            apply = appendPatch(apply, new VPatch(VPatch.VTEXT, a, b))\n            destroyWidgets(a, patch, index)\n        } else if (a.text !== b.text) {\n            apply = appendPatch(apply, new VPatch(VPatch.VTEXT, a, b))\n        }\n    } else if (isWidget(b)) {\n        apply = appendPatch(apply, new VPatch(VPatch.WIDGET, a, b))\n\n        if (!isWidget(a)) {\n            destroyWidgets(a, patch, index)\n        }\n    }\n\n    if (apply) {\n        patch[index] = apply\n    }\n}\n\nfunction diffProps(a, b, hooks) {\n    var diff\n\n    for (var aKey in a) {\n        if (!(aKey in b)) {\n            diff = diff || {}\n            diff[aKey] = undefined\n        }\n\n        var aValue = a[aKey]\n        var bValue = b[aKey]\n\n        if (hooks && aKey in hooks) {\n            diff = diff || {}\n            diff[aKey] = bValue\n        } else {\n            if (isObject(aValue) && isObject(bValue)) {\n                if (getPrototype(bValue) !== getPrototype(aValue)) {\n                    diff = diff || {}\n                    diff[aKey] = bValue\n                } else {\n                    var objectDiff = diffProps(aValue, bValue)\n                    if (objectDiff) {\n                        diff = diff || {}\n                        diff[aKey] = objectDiff\n                    }\n                }\n            } else if (aValue !== bValue) {\n                diff = diff || {}\n                diff[aKey] = bValue\n            }\n        }\n    }\n\n    for (var bKey in b) {\n        if (!(bKey in a)) {\n            diff = diff || {}\n            diff[bKey] = b[bKey]\n        }\n    }\n\n    return diff\n}\n\nfunction getPrototype(value) {\n    if (Object.getPrototypeOf) {\n        return Object.getPrototypeOf(value)\n    } else if (value.__proto__) {\n        return value.__proto__\n    } else if (value.constructor) {\n        return value.constructor.prototype\n    }\n}\n\nfunction diffChildren(a, b, patch, apply, index) {\n    var aChildren = a.children\n    var bChildren = reorder(aChildren, b.children)\n\n    var aLen = aChildren.length\n    var bLen = bChildren.length\n    var len = aLen > bLen ? aLen : bLen\n\n    for (var i = 0; i < len; i++) {\n        var leftNode = aChildren[i]\n        var rightNode = bChildren[i]\n        index += 1\n\n        if (!leftNode) {\n            if (rightNode) {\n                // Excess nodes in b need to be added\n                apply = appendPatch(apply,\n                    new VPatch(VPatch.INSERT, null, rightNode))\n            }\n        } else {\n            walk(leftNode, rightNode, patch, index)\n        }\n\n        if (isVNode(leftNode) && leftNode.count) {\n            index += leftNode.count\n        }\n    }\n\n    if (bChildren.moves) {\n        // Reorder nodes last\n        apply = appendPatch(apply, new VPatch(VPatch.ORDER, a, bChildren.moves))\n    }\n\n    return apply\n}\n\n// Patch records for all destroyed widgets must be added because we need\n// a DOM node reference for the destroy function\nfunction destroyWidgets(vNode, patch, index) {\n    if (isWidget(vNode)) {\n        if (typeof vNode.destroy === \"function\") {\n            patch[index] = new VPatch(VPatch.REMOVE, vNode, null)\n        }\n    } else if (isVNode(vNode) && (vNode.hasWidgets || vNode.hasThunks)) {\n        var children = vNode.children\n        var len = children.length\n        for (var i = 0; i < len; i++) {\n            var child = children[i]\n            index += 1\n\n            destroyWidgets(child, patch, index)\n\n            if (isVNode(child) && child.count) {\n                index += child.count\n            }\n        }\n    } else if (isThunk(vNode)) {\n        thunks(vNode, null, patch, index)\n    }\n}\n\n// Create a sub-patch for thunks\nfunction thunks(a, b, patch, index) {\n    var nodes = handleThunk(a, b);\n    var thunkPatch = diff(nodes.a, nodes.b)\n    if (hasPatches(thunkPatch)) {\n        patch[index] = new VPatch(VPatch.THUNK, null, thunkPatch)\n    }\n}\n\nfunction hasPatches(patch) {\n    for (var index in patch) {\n        if (index !== \"a\") {\n            return true;\n        }\n    }\n\n    return false;\n}\n\n// Execute hooks when two nodes are identical\nfunction hooks(vNode, patch, index) {\n    if (isVNode(vNode)) {\n        if (vNode.hooks) {\n            patch[index] = new VPatch(VPatch.PROPS, vNode.hooks, vNode.hooks)\n        }\n\n        if (vNode.descendantHooks) {\n            var children = vNode.children\n            var len = children.length\n            for (var i = 0; i < len; i++) {\n                var child = children[i]\n                index += 1\n\n                hooks(child, patch, index)\n\n                if (isVNode(child) && child.count) {\n                    index += child.count\n                }\n            }\n        }\n    }\n}\n\n// List diff, naive left to right reordering\nfunction reorder(aChildren, bChildren) {\n\n    var bKeys = keyIndex(bChildren)\n\n    if (!bKeys) {\n        return bChildren\n    }\n\n    var aKeys = keyIndex(aChildren)\n\n    if (!aKeys) {\n        return bChildren\n    }\n\n    var bMatch = {}, aMatch = {}\n\n    for (var key in bKeys) {\n        bMatch[bKeys[key]] = aKeys[key]\n    }\n\n    for (var key in aKeys) {\n        aMatch[aKeys[key]] = bKeys[key]\n    }\n\n    var aLen = aChildren.length\n    var bLen = bChildren.length\n    var len = aLen > bLen ? aLen : bLen\n    var shuffle = []\n    var freeIndex = 0\n    var i = 0\n    var moveIndex = 0\n    var moves = {}\n    var removes = moves.removes = {}\n    var reverse = moves.reverse = {}\n    var hasMoves = false\n\n    while (freeIndex < len) {\n        var move = aMatch[i]\n        if (move !== undefined) {\n            shuffle[i] = bChildren[move]\n            if (move !== moveIndex) {\n                moves[move] = moveIndex\n                reverse[moveIndex] = move\n                hasMoves = true\n            }\n            moveIndex++\n        } else if (i in aMatch) {\n            shuffle[i] = undefined\n            removes[i] = moveIndex++\n            hasMoves = true\n        } else {\n            while (bMatch[freeIndex] !== undefined) {\n                freeIndex++\n            }\n\n            if (freeIndex < len) {\n                var freeChild = bChildren[freeIndex]\n                if (freeChild) {\n                    shuffle[i] = freeChild\n                    if (freeIndex !== moveIndex) {\n                        hasMoves = true\n                        moves[freeIndex] = moveIndex\n                        reverse[moveIndex] = freeIndex\n                    }\n                    moveIndex++\n                }\n                freeIndex++\n            }\n        }\n        i++\n    }\n\n    if (hasMoves) {\n        shuffle.moves = moves\n    }\n\n    return shuffle\n}\n\nfunction keyIndex(children) {\n    var i, keys\n\n    for (i = 0; i < children.length; i++) {\n        var child = children[i]\n\n        if (child.key !== undefined) {\n            keys = keys || {}\n            keys[child.key] = i\n        }\n    }\n\n    return keys\n}\n\nfunction appendPatch(apply, patch) {\n    if (apply) {\n        if (isArray(apply)) {\n            apply.push(patch)\n        } else {\n            apply = [apply, patch]\n        }\n\n        return apply\n    } else {\n        return patch\n    }\n}\n","var version = require(\"./version\")\n\nmodule.exports = VirtualText\n\nfunction VirtualText(text) {\n    this.text = String(text)\n}\n\nVirtualText.prototype.version = version\nVirtualText.prototype.type = \"VirtualText\"\n","var document = require(\"global/document\")\nvar isArray = require(\"x-is-array\")\n\nvar domIndex = require(\"./dom-index\")\nvar patchOp = require(\"./patch-op\")\nmodule.exports = patch\n\nfunction patch(rootNode, patches) {\n    return patchRecursive(rootNode, patches)\n}\n\nfunction patchRecursive(rootNode, patches, renderOptions) {\n    var indices = patchIndices(patches)\n\n    if (indices.length === 0) {\n        return rootNode\n    }\n\n    var index = domIndex(rootNode, patches.a, indices)\n    var ownerDocument = rootNode.ownerDocument\n\n    if (!renderOptions) {\n        renderOptions = { patch: patchRecursive }\n        if (ownerDocument !== document) {\n            renderOptions.document = ownerDocument\n        }\n    }\n\n    for (var i = 0; i < indices.length; i++) {\n        var nodeIndex = indices[i]\n        rootNode = applyPatch(rootNode,\n            index[nodeIndex],\n            patches[nodeIndex],\n            renderOptions)\n    }\n\n    return rootNode\n}\n\nfunction applyPatch(rootNode, domNode, patchList, renderOptions) {\n    if (!domNode) {\n        return rootNode\n    }\n\n    var newNode\n\n    if (isArray(patchList)) {\n        for (var i = 0; i < patchList.length; i++) {\n            newNode = patchOp(patchList[i], domNode, renderOptions)\n\n            if (domNode === rootNode) {\n                rootNode = newNode\n            }\n        }\n    } else {\n        newNode = patchOp(patchList, domNode, renderOptions)\n\n        if (domNode === rootNode) {\n            rootNode = newNode\n        }\n    }\n\n    return rootNode\n}\n\nfunction patchIndices(patches) {\n    var indices = []\n\n    for (var key in patches) {\n        if (key !== \"a\") {\n            indices.push(Number(key))\n        }\n    }\n\n    return indices\n}\n","var document = require(\"global/document\")\n\nvar applyProperties = require(\"./apply-properties\")\n\nvar isVNode = require(\"vtree/is-vnode\")\nvar isVText = require(\"vtree/is-vtext\")\nvar isWidget = require(\"vtree/is-widget\")\nvar handleThunk = require(\"vtree/handle-thunk\")\n\nmodule.exports = createElement\n\nfunction createElement(vnode, opts) {\n    var doc = opts ? opts.document || document : document\n    var warn = opts ? opts.warn : null\n\n    vnode = handleThunk(vnode).a\n\n    if (isWidget(vnode)) {\n        return vnode.init()\n    } else if (isVText(vnode)) {\n        return doc.createTextNode(vnode.text)\n    } else if (!isVNode(vnode)) {\n        if (warn) {\n            warn(\"Item is not a valid virtual dom node\", vnode)\n        }\n        return null\n    }\n\n    var node = (vnode.namespace === null) ?\n        doc.createElement(vnode.tagName) :\n        doc.createElementNS(vnode.namespace, vnode.tagName)\n\n    var props = vnode.properties\n    applyProperties(node, props)\n\n    var children = vnode.children\n\n    for (var i = 0; i < children.length; i++) {\n        var childNode = createElement(children[i], opts)\n        if (childNode) {\n            node.appendChild(childNode)\n        }\n    }\n\n    return node\n}\n","var version = require(\"./version\")\nvar isVNode = require(\"./is-vnode\")\nvar isWidget = require(\"./is-widget\")\nvar isThunk = require(\"./is-thunk\")\nvar isVHook = require(\"./is-vhook\")\n\nmodule.exports = VirtualNode\n\nvar noProperties = {}\nvar noChildren = []\n\nfunction VirtualNode(tagName, properties, children, key, namespace) {\n    this.tagName = tagName\n    this.properties = properties || noProperties\n    this.children = children || noChildren\n    this.key = key != null ? String(key) : undefined\n    this.namespace = (typeof namespace === \"string\") ? namespace : null\n\n    var count = (children && children.length) || 0\n    var descendants = 0\n    var hasWidgets = false\n    var hasThunks = false\n    var descendantHooks = false\n    var hooks\n\n    for (var propName in properties) {\n        if (properties.hasOwnProperty(propName)) {\n            var property = properties[propName]\n            if (isVHook(property)) {\n                if (!hooks) {\n                    hooks = {}\n                }\n\n                hooks[propName] = property\n            }\n        }\n    }\n\n    for (var i = 0; i < count; i++) {\n        var child = children[i]\n        if (isVNode(child)) {\n            descendants += child.count || 0\n\n            if (!hasWidgets && child.hasWidgets) {\n                hasWidgets = true\n            }\n\n            if (!hasThunks && child.hasThunks) {\n                hasThunks = true\n            }\n\n            if (!descendantHooks && (child.hooks || child.descendantHooks)) {\n                descendantHooks = true\n            }\n        } else if (!hasWidgets && isWidget(child)) {\n            if (typeof child.destroy === \"function\") {\n                hasWidgets = true\n            }\n        } else if (!hasThunks && isThunk(child)) {\n            hasThunks = true;\n        }\n    }\n\n    this.count = count + descendants\n    this.hasWidgets = hasWidgets\n    this.hasThunks = hasThunks\n    this.hooks = hooks\n    this.descendantHooks = descendantHooks\n}\n\nVirtualNode.prototype.version = version\nVirtualNode.prototype.type = \"VirtualNode\"\n","var version = require(\"./version\")\n\nVirtualPatch.NONE = 0\nVirtualPatch.VTEXT = 1\nVirtualPatch.VNODE = 2\nVirtualPatch.WIDGET = 3\nVirtualPatch.PROPS = 4\nVirtualPatch.ORDER = 5\nVirtualPatch.INSERT = 6\nVirtualPatch.REMOVE = 7\nVirtualPatch.THUNK = 8\n\nmodule.exports = VirtualPatch\n\nfunction VirtualPatch(type, vNode, patch) {\n    this.type = Number(type)\n    this.vNode = vNode\n    this.patch = patch\n}\n\nVirtualPatch.prototype.version = version\nVirtualPatch.prototype.type = \"VirtualPatch\"\n","var version = require(\"./version\")\n\nmodule.exports = isVirtualText\n\nfunction isVirtualText(x) {\n    return x && x.type === \"VirtualText\" && x.version === version\n}\n","var version = require(\"./version\")\n\nmodule.exports = isVirtualNode\n\nfunction isVirtualNode(x) {\n    return x && x.type === \"VirtualNode\" && x.version === version\n}\n","module.exports = isWidget\n\nfunction isWidget(w) {\n    return w && w.type === \"Widget\"\n}\n","module.exports = isThunk\r\n\r\nfunction isThunk(t) {\r\n    return t && t.type === \"Thunk\"\r\n}\r\n","var isVNode = require(\"./is-vnode\")\nvar isVText = require(\"./is-vtext\")\nvar isWidget = require(\"./is-widget\")\nvar isThunk = require(\"./is-thunk\")\n\nmodule.exports = handleThunk\n\nfunction handleThunk(a, b) {\n    var renderedA = a\n    var renderedB = b\n\n    if (isThunk(b)) {\n        renderedB = renderThunk(b, a)\n    }\n\n    if (isThunk(a)) {\n        renderedA = renderThunk(a, null)\n    }\n\n    return {\n        a: renderedA,\n        b: renderedB\n    }\n}\n\nfunction renderThunk(thunk, previous) {\n    var renderedThunk = thunk.vnode\n\n    if (!renderedThunk) {\n        renderedThunk = thunk.vnode = thunk.render(previous)\n    }\n\n    if (!(isVNode(renderedThunk) ||\n            isVText(renderedThunk) ||\n            isWidget(renderedThunk))) {\n        throw new Error(\"thunk did not return a valid node\");\n    }\n\n    return renderedThunk\n}\n","module.exports = \"1\"\n","// Maps a virtual DOM tree onto a real DOM tree in an efficient manner.\n// We don't want to read all of the DOM nodes in the tree so we use\n// the in-order tree indexing to eliminate recursion down certain branches.\n// We only recurse into a DOM node if we know that it contains a child of\n// interest.\n\nvar noChild = {}\n\nmodule.exports = domIndex\n\nfunction domIndex(rootNode, tree, indices, nodes) {\n    if (!indices || indices.length === 0) {\n        return {}\n    } else {\n        indices.sort(ascending)\n        return recurse(rootNode, tree, indices, nodes, 0)\n    }\n}\n\nfunction recurse(rootNode, tree, indices, nodes, rootIndex) {\n    nodes = nodes || {}\n\n\n    if (rootNode) {\n        if (indexInRange(indices, rootIndex, rootIndex)) {\n            nodes[rootIndex] = rootNode\n        }\n\n        var vChildren = tree.children\n\n        if (vChildren) {\n\n            var childNodes = rootNode.childNodes\n\n            for (var i = 0; i < tree.children.length; i++) {\n                rootIndex += 1\n\n                var vChild = vChildren[i] || noChild\n                var nextIndex = rootIndex + (vChild.count || 0)\n\n                // skip recursion down the tree if there are no nodes down here\n                if (indexInRange(indices, rootIndex, nextIndex)) {\n                    recurse(childNodes[i], vChild, indices, nodes, rootIndex)\n                }\n\n                rootIndex = nextIndex\n            }\n        }\n    }\n\n    return nodes\n}\n\n// Binary search for an index in the interval [left, right]\nfunction indexInRange(indices, left, right) {\n    if (indices.length === 0) {\n        return false\n    }\n\n    var minIndex = 0\n    var maxIndex = indices.length - 1\n    var currentIndex\n    var currentItem\n\n    while (minIndex <= maxIndex) {\n        currentIndex = ((maxIndex + minIndex) / 2) >> 0\n        currentItem = indices[currentIndex]\n\n        if (minIndex === maxIndex) {\n            return currentItem >= left && currentItem <= right\n        } else if (currentItem < left) {\n            minIndex = currentIndex + 1\n        } else  if (currentItem > right) {\n            maxIndex = currentIndex - 1\n        } else {\n            return true\n        }\n    }\n\n    return false;\n}\n\nfunction ascending(a, b) {\n    return a > b ? 1 : -1\n}\n","var applyProperties = require(\"./apply-properties\")\n\nvar isWidget = require(\"vtree/is-widget\")\nvar VPatch = require(\"vtree/vpatch\")\n\nvar render = require(\"./create-element\")\nvar updateWidget = require(\"./update-widget\")\n\nmodule.exports = applyPatch\n\nfunction applyPatch(vpatch, domNode, renderOptions) {\n    var type = vpatch.type\n    var vNode = vpatch.vNode\n    var patch = vpatch.patch\n\n    switch (type) {\n        case VPatch.REMOVE:\n            return removeNode(domNode, vNode)\n        case VPatch.INSERT:\n            return insertNode(domNode, patch, renderOptions)\n        case VPatch.VTEXT:\n            return stringPatch(domNode, vNode, patch, renderOptions)\n        case VPatch.WIDGET:\n            return widgetPatch(domNode, vNode, patch, renderOptions)\n        case VPatch.VNODE:\n            return vNodePatch(domNode, vNode, patch, renderOptions)\n        case VPatch.ORDER:\n            reorderChildren(domNode, patch)\n            return domNode\n        case VPatch.PROPS:\n            applyProperties(domNode, patch, vNode.properties)\n            return domNode\n        case VPatch.THUNK:\n            return replaceRoot(domNode,\n                renderOptions.patch(domNode, patch, renderOptions))\n        default:\n            return domNode\n    }\n}\n\nfunction removeNode(domNode, vNode) {\n    var parentNode = domNode.parentNode\n\n    if (parentNode) {\n        parentNode.removeChild(domNode)\n    }\n\n    destroyWidget(domNode, vNode);\n\n    return null\n}\n\nfunction insertNode(parentNode, vNode, renderOptions) {\n    var newNode = render(vNode, renderOptions)\n\n    if (parentNode) {\n        parentNode.appendChild(newNode)\n    }\n\n    return parentNode\n}\n\nfunction stringPatch(domNode, leftVNode, vText, renderOptions) {\n    var newNode\n\n    if (domNode.nodeType === 3) {\n        domNode.replaceData(0, domNode.length, vText.text)\n        newNode = domNode\n    } else {\n        var parentNode = domNode.parentNode\n        newNode = render(vText, renderOptions)\n\n        if (parentNode) {\n            parentNode.replaceChild(newNode, domNode)\n        }\n    }\n\n    destroyWidget(domNode, leftVNode)\n\n    return newNode\n}\n\nfunction widgetPatch(domNode, leftVNode, widget, renderOptions) {\n    if (updateWidget(leftVNode, widget)) {\n        return widget.update(leftVNode, domNode) || domNode\n    }\n\n    var parentNode = domNode.parentNode\n    var newWidget = render(widget, renderOptions)\n\n    if (parentNode) {\n        parentNode.replaceChild(newWidget, domNode)\n    }\n\n    destroyWidget(domNode, leftVNode)\n\n    return newWidget\n}\n\nfunction vNodePatch(domNode, leftVNode, vNode, renderOptions) {\n    var parentNode = domNode.parentNode\n    var newNode = render(vNode, renderOptions)\n\n    if (parentNode) {\n        parentNode.replaceChild(newNode, domNode)\n    }\n\n    destroyWidget(domNode, leftVNode)\n\n    return newNode\n}\n\nfunction destroyWidget(domNode, w) {\n    if (typeof w.destroy === \"function\" && isWidget(w)) {\n        w.destroy(domNode)\n    }\n}\n\nfunction reorderChildren(domNode, bIndex) {\n    var children = []\n    var childNodes = domNode.childNodes\n    var len = childNodes.length\n    var i\n    var reverseIndex = bIndex.reverse\n\n    for (i = 0; i < len; i++) {\n        children.push(domNode.childNodes[i])\n    }\n\n    var insertOffset = 0\n    var move\n    var node\n    var insertNode\n    for (i = 0; i < len; i++) {\n        move = bIndex[i]\n        if (move !== undefined && move !== i) {\n            // the element currently at this index will be moved later so increase the insert offset\n            if (reverseIndex[i] > i) {\n                insertOffset++\n            }\n\n            node = children[move]\n            insertNode = childNodes[i + insertOffset] || null\n            if (node !== insertNode) {\n                domNode.insertBefore(node, insertNode)\n            }\n\n            // the moved element came from the front of the array so reduce the insert offset\n            if (move < i) {\n                insertOffset--\n            }\n        }\n\n        // element at this index is scheduled to be removed so increase insert offset\n        if (i in bIndex.removes) {\n            insertOffset++\n        }\n    }\n}\n\nfunction replaceRoot(oldRoot, newRoot) {\n    if (oldRoot && newRoot && oldRoot !== newRoot && oldRoot.parentNode) {\n        console.log(oldRoot)\n        oldRoot.parentNode.replaceChild(newRoot, oldRoot)\n    }\n\n    return newRoot;\n}\n","var isObject = require(\"is-object\")\nvar isHook = require(\"vtree/is-vhook\")\n\nmodule.exports = applyProperties\n\nfunction applyProperties(node, props, previous) {\n    for (var propName in props) {\n        var propValue = props[propName]\n\n        if (propValue === undefined) {\n            removeProperty(node, props, previous, propName);\n        } else if (isHook(propValue)) {\n            propValue.hook(node,\n                propName,\n                previous ? previous[propName] : undefined)\n        } else {\n            if (isObject(propValue)) {\n                patchObject(node, props, previous, propName, propValue);\n            } else if (propValue !== undefined) {\n                node[propName] = propValue\n            }\n        }\n    }\n}\n\nfunction removeProperty(node, props, previous, propName) {\n    if (previous) {\n        var previousValue = previous[propName]\n\n        if (!isHook(previousValue)) {\n            if (propName === \"attributes\") {\n                for (var attrName in previousValue) {\n                    node.removeAttribute(attrName)\n                }\n            } else if (propName === \"style\") {\n                for (var i in previousValue) {\n                    node.style[i] = \"\"\n                }\n            } else if (typeof previousValue === \"string\") {\n                node[propName] = \"\"\n            } else {\n                node[propName] = null\n            }\n        }\n    }\n}\n\nfunction patchObject(node, props, previous, propName, propValue) {\n    var previousValue = previous ? previous[propName] : undefined\n\n    // Set attributes\n    if (propName === \"attributes\") {\n        for (var attrName in propValue) {\n            var attrValue = propValue[attrName]\n\n            if (attrValue === undefined) {\n                node.removeAttribute(attrName)\n            } else {\n                node.setAttribute(attrName, attrValue)\n            }\n        }\n\n        return\n    }\n\n    if(previousValue && isObject(previousValue) &&\n        getPrototype(previousValue) !== getPrototype(propValue)) {\n        node[propName] = propValue\n        return\n    }\n\n    if (!isObject(node[propName])) {\n        node[propName] = {}\n    }\n\n    var replacer = propName === \"style\" ? \"\" : undefined\n\n    for (var k in propValue) {\n        var value = propValue[k]\n        node[propName][k] = (value === undefined) ? replacer : value\n    }\n}\n\nfunction getPrototype(value) {\n    if (Object.getPrototypeOf) {\n        return Object.getPrototypeOf(value)\n    } else if (value.__proto__) {\n        return value.__proto__\n    } else if (value.constructor) {\n        return value.constructor.prototype\n    }\n}\n","module.exports = isHook\n\nfunction isHook(hook) {\n    return hook && typeof hook.hook === \"function\" &&\n        !hook.hasOwnProperty(\"hook\")\n}\n","var isWidget = require(\"vtree/is-widget\")\n\nmodule.exports = updateWidget\n\nfunction updateWidget(a, b) {\n    if (isWidget(a) && isWidget(b)) {\n        if (\"name\" in a && \"name\" in b) {\n            return a.id === b.id\n        } else {\n            return a.init === b.init\n        }\n    }\n\n    return false\n}\n","var nativeIsArray = Array.isArray\nvar toString = Object.prototype.toString\n\nmodule.exports = nativeIsArray || isArray\n\nfunction isArray(obj) {\n    return toString.call(obj) === \"[object Array]\"\n}\n","var topLevel = typeof global !== 'undefined' ? global :\n    typeof window !== 'undefined' ? window : {}\nvar minDoc = require('min-document');\n\nif (typeof document !== 'undefined') {\n    module.exports = document;\n} else {\n    var doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n    if (!doccy) {\n        doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n    }\n\n    module.exports = doccy;\n}\n","module.exports = isObject\n\nfunction isObject(x) {\n    return typeof x === \"object\" && x !== null\n}\n"]}